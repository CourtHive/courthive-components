{"version":3,"file":"structure.stories-0edc9c30.js","sources":["../../src/styles/structureStyle.js","../../src/components/renderStructure.js","../../src/data/generateEventData.js"],"sourcesContent":["import { css } from \"@stitches/core\";\n\nexport const structureStyle = css({\n  marginInlineStart: \"1rem\",\n  overflowX: \"auto\",\n  display: \"flex\",\n});\n","import { structureStyle } from \"../styles/structureStyle\";\nimport { drawEngine } from \"tods-competition-factory\";\nimport { renderRound } from \"./renderRound\";\n\nexport function renderStructure({\n  selectedMatchUpId,\n  eventHandlers,\n  searchActive,\n  composition,\n  matchUps,\n}) {\n  const { roundNumbers, hasOddMatchUpsCount } = drawEngine.getRoundMatchUps({\n    matchUps,\n  });\n\n  const isLucky = hasOddMatchUpsCount;\n\n  const div = document.createElement(\"div\");\n  div.className = structureStyle();\n\n  for (const roundNumber of roundNumbers) {\n    const round = renderRound({\n      selectedMatchUpId,\n      eventHandlers,\n      searchActive,\n      composition,\n      roundNumber,\n      matchUps,\n      isLucky,\n    });\n    div.appendChild(round);\n  }\n\n  return div;\n}\n","import {\n  fixtures,\n  utilities,\n  mocksEngine,\n  tournamentEngine,\n} from \"tods-competition-factory\";\n\nexport function generateEventData({\n  matchUpFormat = \"SET5-S:6/TB7\",\n  completeAllMatchUps = true,\n  autoSchedule = true,\n  participantsCount,\n  completionGoal,\n  addQualifying,\n  drawSize = 4,\n  eventType,\n  drawType,\n} = {}) {\n  const complete =\n    completionGoal < 100\n      ? Math.floor(drawSize * 0.01 * completionGoal)\n      : undefined;\n\n  participantsCount = participantsCount || drawSize;\n  const drawId = \"drawId\";\n\n  const drawProfile = {\n    completionGoal: complete,\n    participantsCount,\n    matchUpFormat,\n    seedsCount: 8,\n    eventType,\n    drawType,\n    drawSize,\n    drawId,\n  };\n  if (addQualifying)\n    drawProfile.qualifyingProfiles = [\n      { structureProfiles: [{ drawSize: 16, qualifyingPositions: 4 }] },\n    ];\n  if (drawType === \"AD_HOC\")\n    Object.assign(drawProfile, { drawMatic: true, roundsCount: 3 });\n\n  return genData({ drawProfile, completeAllMatchUps, autoSchedule });\n}\n\nfunction genData({ drawProfile, completeAllMatchUps, autoSchedule }) {\n  const drawId = \"drawId\";\n  const venueId = \"venueId\";\n  const startTime = \"08:00\";\n  const endTime = \"20:00\";\n  const startDate = utilities.dateTime.extractDate(new Date().toISOString());\n  const drawProfiles = [drawProfile];\n  const venueProfiles = [\n    {\n      venueId,\n      venueName: \"Venue\",\n      venueAbbreviation: \"VNU\",\n      courtNames: [\"One\", \"Two\", \"Three\"],\n      courtIds: [\"c1\", \"c2\", \"c3\"],\n      courtsCount: 8,\n      startTime,\n      endTime,\n    },\n  ];\n  const schedulingProfile = [\n    {\n      scheduleDate: startDate,\n      venues: [\n        {\n          venueId,\n          rounds: [\n            { drawId, roundNumber: 1 },\n            { drawId, roundNumber: 2 },\n          ],\n        },\n      ],\n    },\n  ];\n\n  const result = mocksEngine.generateTournamentRecord({\n    policyDefinitions: fixtures.policies.POLICY_SCHEDULING_NO_DAILY_LIMITS,\n    scheduleCompletedMatchUps: true,\n    completeAllMatchUps,\n    schedulingProfile,\n    autoSchedule,\n    venueProfiles,\n    drawProfiles,\n    startDate,\n  });\n\n  if (result.error) return result;\n\n  const {\n    eventIds: [eventId],\n    tournamentRecord,\n  } = result;\n\n  tournamentEngine.setState(tournamentRecord);\n  const { eventData } =\n    tournamentEngine.getEventData({\n      participantsProfile: { withIOC: true, withISO2: true },\n      eventId,\n    }) || {};\n\n  return { eventData };\n}\n"],"names":["structureStyle","css","renderStructure","selectedMatchUpId","eventHandlers","searchActive","composition","matchUps","roundNumbers","hasOddMatchUpsCount","drawEngine","isLucky","div","roundNumber","round","renderRound","generateEventData","matchUpFormat","completeAllMatchUps","autoSchedule","participantsCount","completionGoal","addQualifying","drawSize","eventType","drawType","complete","drawProfile","genData","drawId","venueId","startTime","endTime","startDate","utilities","drawProfiles","venueProfiles","schedulingProfile","result","mocksEngine","fixtures","eventId","tournamentRecord","tournamentEngine","eventData"],"mappings":"6iBAEO,MAAMA,EAAiBC,EAAI,CAChC,kBAAmB,OACnB,UAAW,OACX,QAAS,MACX,CAAC,ECFM,SAASC,EAAgB,CAC9B,kBAAAC,EACA,cAAAC,EACA,aAAAC,EACA,YAAAC,EACA,SAAAC,CACF,EAAG,CACD,KAAM,CAAE,aAAAC,EAAc,oBAAAC,GAAwBC,EAAW,iBAAiB,CACxE,SAAAH,CACJ,CAAG,EAEKI,EAAUF,EAEVG,EAAM,SAAS,cAAc,KAAK,EACxCA,EAAI,UAAYZ,IAEhB,UAAWa,KAAeL,EAAc,CACtC,MAAMM,EAAQC,EAAY,CACxB,kBAAAZ,EACA,cAAAC,EACA,aAAAC,EACA,YAAAC,EACA,YAAAO,EACA,SAAAN,EACA,QAAAI,CACN,CAAK,EACDC,EAAI,YAAYE,CAAK,CACtB,CAED,OAAOF,CACT,CC3BO,SAASI,EAAkB,CAChC,cAAAC,EAAgB,eAChB,oBAAAC,EAAsB,GACtB,aAAAC,EAAe,GACf,kBAAAC,EACA,eAAAC,EACA,cAAAC,EACA,SAAAC,EAAW,EACX,UAAAC,EACA,SAAAC,CACF,EAAI,GAAI,CACN,MAAMC,EACJL,EAAiB,IACb,KAAK,MAAME,EAAW,IAAOF,CAAc,EAC3C,OAEND,EAAoBA,GAAqBG,EAGzC,MAAMI,EAAc,CAClB,eAAgBD,EAChB,kBAAAN,EACA,cAAAH,EACA,WAAY,EACZ,UAAAO,EACA,SAAAC,EACA,SAAAF,EACA,OAVa,QAWjB,EACE,OAAID,IACFK,EAAY,mBAAqB,CAC/B,CAAE,kBAAmB,CAAC,CAAE,SAAU,GAAI,oBAAqB,CAAC,CAAE,CAAG,CACvE,GACMF,IAAa,UACf,OAAO,OAAOE,EAAa,CAAE,UAAW,GAAM,YAAa,CAAC,CAAE,EAEzDC,EAAQ,CAAE,YAAAD,EAAa,oBAAAT,EAAqB,aAAAC,CAAc,CAAA,CACnE,CAEA,SAASS,EAAQ,CAAE,YAAAD,EAAa,oBAAAT,EAAqB,aAAAC,CAAY,EAAI,CACnE,MAAMU,EAAS,SACTC,EAAU,UACVC,EAAY,QACZC,EAAU,QACVC,EAAYC,EAAU,SAAS,YAAY,IAAI,KAAM,EAAC,YAAW,CAAE,EACnEC,EAAe,CAACR,CAAW,EAC3BS,EAAgB,CACpB,CACE,QAAAN,EACA,UAAW,QACX,kBAAmB,MACnB,WAAY,CAAC,MAAO,MAAO,OAAO,EAClC,SAAU,CAAC,KAAM,KAAM,IAAI,EAC3B,YAAa,EACb,UAAAC,EACA,QAAAC,CACD,CACL,EACQK,EAAoB,CACxB,CACE,aAAcJ,EACd,OAAQ,CACN,CACE,QAAAH,EACA,OAAQ,CACN,CAAE,OAAAD,EAAQ,YAAa,CAAG,EAC1B,CAAE,OAAAA,EAAQ,YAAa,CAAG,CAC3B,CACF,CACF,CACF,CACL,EAEQS,EAASC,EAAY,yBAAyB,CAClD,kBAAmBC,EAAS,SAAS,kCACrC,0BAA2B,GAC3B,oBAAAtB,EACA,kBAAAmB,EACA,aAAAlB,EACA,cAAAiB,EACA,aAAAD,EACA,UAAAF,CACJ,CAAG,EAED,GAAIK,EAAO,MAAO,OAAOA,EAEzB,KAAM,CACJ,SAAU,CAACG,CAAO,EAClB,iBAAAC,CACD,EAAGJ,EAEJK,EAAiB,SAASD,CAAgB,EAC1C,KAAM,CAAE,UAAAE,CAAW,EACjBD,EAAiB,aAAa,CAC5B,oBAAqB,CAAE,QAAS,GAAM,SAAU,EAAM,EACtD,QAAAF,CACD,CAAA,GAAK,CAAA,EAER,MAAO,CAAE,UAAAG,CAAS,CACpB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}